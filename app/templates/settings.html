{% extends "base.html" %}

{% block content %}
<h2>Einstellungen</h2>
<form method="post" class="mt-3">
  <div class="mb-3">
    <label for="audio_output" class="form-label">Audioausgabe (mpv Audio Device)</label>
    <input type="text" class="form-control" id="audio_output" name="audio_output" value="{{ settings.audio_output }}" placeholder="z.B. alsa/plughw:0,0 oder hdmi">
    <div class="form-text">Leer lassen für automatische Auswahl durch mpv.</div>
  </div>
  <div class="mb-3">
    <label for="input_gpio" class="form-label">Trigger GPIO</label>
    <select class="form-select" id="input_gpio" name="input_gpio">
      <option value="" {% if not settings.input_gpio %}selected{% endif %}>Deaktiviert</option>
      {% for option in available_gpio_pins %}
      <option value="{{ option.bcm }}" {% if settings.input_gpio == option.bcm %}selected{% endif %}>{{ option.label }}</option>
      {% endfor %}
    </select>
    <div class="form-text">Wähle den GPIO-Pin (BCM-Nummer, Pin-Nummer in Klammern), der als Trigger-Eingang genutzt werden soll.</div>
  </div>
  <div class="mb-3">
    <label for="input_gpio_mode" class="form-label">Trigger-Verhalten</label>
    <select class="form-select" id="input_gpio_mode" name="input_gpio_mode">
      <option value="high" {% if settings.input_gpio_active_high %}selected{% endif %}>Schließt gegen 3,3V (aktiv bei HIGH)</option>
      <option value="low" {% if not settings.input_gpio_active_high %}selected{% endif %}>Schließt gegen GND (aktiv bei LOW)</option>
    </select>
    <div class="form-text">Passe an, ob dein Taster/Sensor auf 3,3V oder GND zieht.</div>
  </div>
  <button type="submit" class="btn btn-primary">Speichern</button>
  <a href="{{ url_for('index') }}" class="btn btn-secondary">Zurück</a>
</form>
{% endblock %}
