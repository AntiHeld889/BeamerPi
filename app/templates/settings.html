{% extends "base.html" %}

{% block content %}
<h2>Einstellungen</h2>
<form method="post" class="mt-3">
  <input type="hidden" name="action" value="update_settings">
  <div class="mb-3">
    <label for="audio_output" class="form-label">Audioausgabe (mpv Audio Device)</label>
    <input type="text" class="form-control" id="audio_output" name="audio_output" value="{{ settings.audio_output }}" placeholder="z.B. alsa/plughw:0,0 oder hdmi">
    <div class="form-text">Leer lassen f端r automatische Auswahl durch mpv.</div>
  </div>
  <div class="mb-3">
    <label for="trigger_start_webhook" class="form-label">Webhook-URL f端r Trigger-Start</label>
    <input type="url" class="form-control" id="trigger_start_webhook" name="trigger_start_webhook" value="{{ settings.trigger_start_webhook_url }}" placeholder="https://example.com/webhook/start">
    <div class="form-text">Diese URL wird aufgerufen, wenn ein Trigger-Video gestartet wird.</div>
  </div>
  <div class="mb-3">
    <label for="trigger_end_webhook" class="form-label">Webhook-URL f端r Trigger-Ende</label>
    <input type="url" class="form-control" id="trigger_end_webhook" name="trigger_end_webhook" value="{{ settings.trigger_end_webhook_url }}" placeholder="https://example.com/webhook/end">
    <div class="form-text">Diese URL wird aufgerufen, wenn ein Trigger-Video beendet ist.</div>
  </div>
  <div class="mb-3">
    <label for="video_directory" class="form-label">Videoverzeichnis</label>
    <input
      type="text"
      class="form-control"
      id="video_directory"
      name="video_directory"
      value="{{ settings.video_directory }}"
      placeholder="Pfad zum Ordner mit Videos"
      required
    >
    <div class="form-text">Der Ordner wird automatisch erstellt, falls er noch nicht existiert.</div>
  </div>
  <button type="submit" class="btn btn-primary">Speichern</button>
  <a href="{{ url_for('index') }}" class="btn btn-secondary">Zur端ck</a>
</form>

<hr class="my-4">

<div class="row g-4">
  <div class="col-12 col-lg-6">
    <h3 class="h5">Neuen Ordner anlegen</h3>
    <p class="text-muted small mb-3">
      Erstellen Sie Unterordner innerhalb des aktuellen Videoverzeichnisses
      <code>{{ video_directory }}</code>.
    </p>
    <form method="post" class="row g-2 align-items-end">
      <input type="hidden" name="action" value="create_folder">
      <div class="col-12">
        <label for="folder_path" class="form-label">Ordnerpfad (relativ zum Videoverzeichnis)</label>
        <input type="text" class="form-control" id="folder_path" name="folder_path" placeholder="z.&nbsp;B. veranstaltungen/2024" required>
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-outline-primary">Ordner erstellen</button>
      </div>
    </form>
  </div>
  <div class="col-12 col-lg-6">
    <h3 class="h5">Videos hochladen</h3>
    <p class="text-muted small mb-3">
      Laden Sie neue Videos direkt in das Videoverzeichnis oder einen Unterordner hoch.
    </p>
    <form method="post" enctype="multipart/form-data" class="row g-2 align-items-end">
      <input type="hidden" name="action" value="upload_videos">
      <div class="col-12">
        <label for="upload_subdirectory" class="form-label">Zielordner (relativ, optional)</label>
        <input type="text" class="form-control" id="upload_subdirectory" name="upload_subdirectory" placeholder="z.&nbsp;B. veranstaltungen/2024">
        <div class="form-text">Leer lassen, um direkt nach <code>{{ video_directory }}</code> hochzuladen.</div>
      </div>
      <div class="col-12">
        <label for="video_files" class="form-label">Videodateien</label>
        <input type="file" class="form-control" id="video_files" name="video_files" accept="video/*" multiple required>
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-outline-success">Videos hochladen</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
